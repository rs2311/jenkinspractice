---
- hosts: "{{SW}}"
  gather_facts: false
  connection: network_cli

  vars_files:
   - ./DC_1_Underlay_Intent.yaml

  tasks:
    - name: Enable
      eos_command:
        commands: enable

    - name: Host_Configuration
      eos_config:
        src: DC_1_HostConfig.j2
      when: (Devices[SW]['device_role'] == 'host')

    - name: Underlay_P2P_OSPF_BGP_EVPN_Configuration
      eos_config:
        src: DC1_Underlay_P2P_OSPF_BGP_EVPN_Config.j2
      when: (Devices[SW]['device_role'] == 'leaf' or 'spine')

    - name: DC1_Underlay_Vxlan_CustomerAddition
      eos_config:
        src: DC1_Underlay_Vxlan_CustomerAddition.j2
      when: (Devices[SW]['device_role'] == 'leaf')
    
    
    
    
