{##### Type5 Routes Classic L3 ######}
{##### Applicable for Leaf #####}

vrf instance {{cust_name}} 
   rd {{cust_id}}:{{Devices[SW]['device_id']}}
!
ip routing vrf {{cust_name}}
!
interface loopback {{cust_id}}
   vrf forwarding {{cust_name}}
   ip address {{l3_loopback_subnet | ipaddr(Devices[SW]['device_id']) | ipaddr("address")}}/32
!
{##### Type5 Routes Classic L3 ######}
{##### Applicable for Leaf #####}

interface Vxlan1
   vxlan vrf {{cust_name}} vni {{l3_vni}}

{###### Task 5 Route Addition ##############}
{###### Type5 Routes Classic L3 ############}
{###### Applicable for leaf ############}

vlan {{type5_vlan_id}}
   name {{type5_vlan_name}}
!
interface vlan {{type5_vlan_id}}
   vrf forwarding {{cust_name}}
   ip address {{type5_vlan_subnet | ipaddr(1)}}
!
{##### Type5 Routes Classic L3 BGP Configuration #####}
{##### Applicable for Leaf #####}

router bgp 65000
   vrf {{cust_name}}
      rd {{cust_id}}:{{Devices[SW]['device_id']}}
      route-target import evpn {{cust_id}}:{{cust_id}}
      route-target export evpn {{cust_id}}:{{cust_id}}
      redistribute connected
      exit
   exit

{##### Type2 Routes VLAN Creation #####}
{##### Applicable for leaf #####}
!
vlan {{type2_vlan_id}}
   name {{type2_vlan_name}}
!
interface vlan {{type2_vlan_id}}
   vrf forwarding {{cust_name}}
   ip address {{type2_vlan_subnet | ipaddr(1)}}
!

{##### Type2 Routes Vxlan VNI Entry #####}
{##### Applicable for leaf #####}

!
interface Vxlan1
   vxlan vlan {{type2_vlan_id}} vni {{type2_vlan_vni}}
!
{##### Type2 Routes BGP Configuration #####}
{##### Applicable for leaf #####}
!
router bgp 65000
   vlan {{type2_vlan_id}}
   rd {{type2_vlan_id}}:{{ Devices[SW]['device_id'] }}
   route-target both {{type2_vlan_id}}:{{type2_vlan_id}}
   redistribute learned
!











